syntax = "proto3";

package common.v1;

option go_package = "github.com/tam/tam-protos/gen/go/common/v1;commonv1";

// Error codes for consistent error handling across services
enum ErrorCode {
    ERROR_CODE_UNSPECIFIED = 0;
    ERROR_CODE_INTERNAL = 1;
    ERROR_CODE_NOT_FOUND = 2;
    ERROR_CODE_ALREADY_EXISTS = 3;
    ERROR_CODE_INVALID_ARGUMENT = 4;
    ERROR_CODE_PERMISSION_DENIED = 5;
    ERROR_CODE_UNAUTHENTICATED = 6;
    ERROR_CODE_RESOURCE_EXHAUSTED = 7;
    ERROR_CODE_FAILED_PRECONDITION = 8;
    ERROR_CODE_ABORTED = 9;
    ERROR_CODE_OUT_OF_RANGE = 10;
    ERROR_CODE_UNIMPLEMENTED = 11;
    ERROR_CODE_UNAVAILABLE = 12;
    ERROR_CODE_DEADLINE_EXCEEDED = 13;
    // Domain-specific errors
    ERROR_CODE_INSUFFICIENT_FUNDS = 100;
    ERROR_CODE_RISK_CHECK_FAILED = 101;
    ERROR_CODE_EVENT_NOT_OPEN = 102;
    ERROR_CODE_IDEMPOTENCY_CONFLICT = 103;
}

// Error details
message ErrorDetails {
    ErrorCode code = 1;
    string message = 2;
    map<string, string> metadata = 3;
}
