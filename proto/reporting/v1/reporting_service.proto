syntax = "proto3";

package reporting.v1;

option go_package = "github.com/tam/tam-protos/gen/go/reporting/v1;reportingv1";

// ReportingService provides analytics and reporting capabilities
service ReportingService {
    // Get daily platform statistics
    rpc GetDailyStats(GetDailyStatsRequest) returns (GetDailyStatsResponse);

    // Get user-specific statistics
    rpc GetUserStats(GetUserStatsRequest) returns (GetUserStatsResponse);

    // Generate a report (async)
    rpc GenerateReport(GenerateReportRequest) returns (GenerateReportResponse);
}

// Request to get daily stats
message GetDailyStatsRequest {
    string date = 1;                // ISO date format "2025-01-15"
}

// Response with daily statistics
message GetDailyStatsResponse {
    DailyStats stats = 1;
}

// Daily platform statistics
message DailyStats {
    string date = 1;
    int64 total_bets = 2;
    string total_volume = 3;        // Decimal as string
    int64 total_users = 4;
    string total_revenue = 5;       // Decimal as string
    double win_rate = 6;
}

// Request to get user statistics
message GetUserStatsRequest {
    string user_id = 1;
    string start_date = 2;
    string end_date = 3;
}

// Response with user statistics
message GetUserStatsResponse {
    UserStats stats = 1;
}

// User-specific statistics
message UserStats {
    string user_id = 1;
    int64 total_bets = 2;
    string total_wagered = 3;       // Decimal as string
    string total_winnings = 4;      // Decimal as string
    string net_profit = 5;          // Decimal as string
    double win_rate = 6;
}

// Request to generate a report
message GenerateReportRequest {
    string report_type = 1;         // "daily", "weekly", "monthly"
    string start_date = 2;
    string end_date = 3;
}

// Response from report generation
message GenerateReportResponse {
    string report_id = 1;
    string status = 2;
    string download_url = 3;
}
